module.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=54)}({1:function(t,e,n){"use strict";function i(t,e,n,i,s,r,l,o){var a,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),r&&(u._scopeId="data-v-"+r),l?(a=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},u._ssrRegister=a):s&&(a=o?function(){s.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:s),a)if(u.functional){u._injectStyles=a;var c=u.render;u.render=function(t,e){return a.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,a):[a]}return{exports:t,options:u}}n.d(e,"a",function(){return i})},3:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s});const i=t=>void 0!==t&&null!==t,s=t=>"number"==typeof t||/^\d+(\.\d+)?$/.test(t)},4:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return u});var i,s=n(3);function r(t){if(Object(s.a)(t))return Object(s.b)(t)?`${t}px`:String(t)}function l(t,e,n){var i=t.indexOf(e),s="";return-1===i?t:"-"===e&&0!==i?t.slice(0,i):("."===e&&t.match(/^(\.|-\.)/)&&(s=i?"-0":"0"),s+t.slice(0,i+1)+t.slice(i).replace(n,""))}function o(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!0),t=e?l(t,".",/\./g):t.split(".")[0],t=n?l(t,"-",/-/g):t.replace(/-/,"");var i=e?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(i,"")}function a(t){return+(t=t.replace(/rem/g,""))*function(){if(!i){const t=document.documentElement,e=t.style.fontSize||window.getComputedStyle(t).fontSize;i=parseFloat(e)}return i}()}function u(t){return"number"==typeof t?t:-1!==t.indexOf("rem")?a(t):-1!==t.indexOf("vw")?function(t){return+(t=t.replace(/vw/g,""))*window.innerWidth/100}(t):-1!==t.indexOf("vh")?function(t){return+(t=t.replace(/vh/g,""))*window.innerHeight/100}(t):parseFloat(t)}},54:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"gm-m-select"},["top"===t.toolbarPosition?[t.showToolbar?n("div",{staticClass:"gm-m-select__toolbar"},[t.$scopedSlots.default?t._t("default"):[n("button",{staticClass:"gm-m-select__cancel",on:{click:t.cancel}},[t._v("\n                    "+t._s(t.cancelButtonText)+"\n                ")]),n("div",{staticClass:"gm-m-select__title gm-m-ellipsis"},[t._v("\n                    "+t._s(t.title)+"\n                ")]),n("button",{staticClass:"gm-m-select__confirm",on:{click:t.confirm}},[t._v("\n                    "+t._s(t.confirmButtonText)+"\n                ")])]],2):t._e()]:t._e(),n("div",{staticClass:"gm-m-select__columns",style:{height:Number(t.visibleItemCount)*t.itemPxHeight+"px"}},[t._l(t.columnsList,function(e,i){return[n("gm-m-columns",{key:i,ref:"column",refInFor:!0,attrs:{columns:e.values,"default-index":t.defaultIndex,"swipe-duration":t.$attrs.swipeDuration,"visible-item-count":t.$attrs.visibleItemCount},on:{change:function(e){return t.change(i)},touchend:function(e){return t.touchEnd(i)}}})]}),n("div",{staticClass:"gm-m-select__mask",style:{backgroundSize:t.backgroundSize}}),n("div",{staticClass:"gm-m-hairline-unset--top-bottom gm-m-select__frame",style:{height:t.itemPxHeight+"px"}})],2),"bottom"===t.toolbarPosition?[t.showToolbar?n("div",{staticClass:"gm-m-select__toolbar"},[t.$scopedSlots.default?t._t("default"):[n("button",{staticClass:"gm-m-select__cancel",on:{click:t.cancel}},[t._v("\n                    "+t._s(t.cancelButtonText)+"\n                ")]),n("div",{staticClass:"gm-m-select__title gm-m-ellipsis"},[t._v("\n                    "+t._s(t.title)+"\n                ")]),n("button",{staticClass:"gm-m-select__confirm",on:{click:t.confirm}},[t._v("\n                    "+t._s(t.confirmButtonText)+"\n                ")])]],2):t._e()]:t._e()],2)};i._withStripped=!0;var s=n(4),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"gm-m-select__column",on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}},[n("ul",{staticClass:"gm-m-select-column__wrapper",staticStyle:{"transition-property":"all"},style:t.scaleFun},t._l(t.columnsList,function(e,i){return n("li",{key:i,staticClass:"gm-m-select-column__item",class:{"gm-m-select-column__item--selected":t.ins===i},style:{height:t.itemPxHeight+"px"},attrs:{role:"button"},on:{click:function(n){return t.handleClick(e,i)}}},[n("div",{staticClass:"gm-m-ellipsi"},[t.allowHtml?n("div",{domProps:{innerHTML:t._s("object"!=typeof e?e:e[t.valueKey])}}):[t._v("\n                    "+t._s("object"!=typeof e?e:e[t.valueKey])+"\n                ")]],2)])}),0)])};r._withStripped=!0;var l=n(3);function o(t){if(!Object(l.a)(t))return t;if(Array.isArray(t))return t.map(function(t){return o(t)});if("object"==typeof t){let e={};return Object.keys(t).forEach(function(n){e[n]=o(t[n])}),e}return t}var a={name:"Column",props:{columns:{type:Array,default:()=>[]},itemHeight:[String,Number],valueKey:{type:String,default:"text"},allowHtml:{type:Boolean,default:!0},swipeDuration:{type:[String,Number],default:"200"},visibleItemCount:{type:[Number,String],default:6},defaultIndex:Number,initialOptions:{type:Array,default:function(){return[]}}},data(){return{ins:0,scroll:!1,clientY:0,startY:0,deltaY:0,offsetY:0,currentIndex:this.defaultIndex,options:this.columns,optionsIndex:o(this.initialOptions)}},computed:{itemPxHeight:function(){return this.itemHeight?Object(s.c)(this.itemHeight):44},scaleFun:function(){let t="",e=this.swipeDuration,n=this.itemPxHeight*Number(this.visibleItemCount);return this.translate3dHeight=(n-this.itemPxHeight)/2,`transform:${t=this.scroll?`translate3d(0px, ${this.clientY}px, 0px);`:0===this.ins?`translate3d(0px, ${this.translate3dHeight}px, 0px);`:`translate3d(0px, ${this.translate3dHeight-this.itemPxHeight*this.ins}px, 0px);`};transition-duration:  ${e}ms;`},backgroundSize(){return"100% "+((this.itemPxHeight*Number(this.visibleItemCount)-this.itemPxHeight)/2+"px")},columnsList(){let t=this.columns;return JSON.stringify(this.options)!==JSON.stringify(this.columns)?(t=o(this.options),this.setIndex(this.defaultIndex)):(t=this.columns,this.setIndex(this.defaultIndex)),t}},methods:{setOptions(t){this.options=t},handleClick(t,e){this.scroll=!1,this.ins=e,this.currentIndex=e,this.$emit("change",t[this.valueKey],e,t)},touchStart(t){this.readonly||(this.startY=t.touches[0].clientY)},touchMove(t){if(this.readonly)return;t.preventDefault();let e=t.touches[0];this.scroll=!0,this.deltaY=e.clientY-this.startY,this.offsetY=Math.abs(this.deltaY),this.clientY=this.deltaY},touchEnd(t){if(this.readonly)return;let e=Math.round((this.translate3dHeight-this.deltaY)/this.itemPxHeight);e>this.columns.length?e=this.columns.length-1:e<0&&(e=0),this.ins=e,this.currentIndex=e,this.clientY=this.translate3dHeight-this.itemPxHeight*e,this.$emit("touchend",t)},setIndex(t){0===t&&(this.currentIndex=0,this.ins=0)},getValue(){return this.columnsList[this.currentIndex]},setValue(t){console.log(this.columns,t)}}},u=n(1),c=Object(u.a)(a,r,[],!1,null,"1900e180",null);c.options.__file="packages/select/src/column.vue";var h={name:"GmMSelect",components:{GmMColumns:c.exports},props:{columns:{type:Array,default:()=>[]},showToolbar:Boolean,title:String,confirmButtonText:{type:String,default:"确定"},cancelButtonText:{type:String,default:"取消"},visibleItemCount:{type:[Number,String],default:6},valueKey:{type:String,default:"text"},toolbarPosition:{type:String,default:"top"},itemHeight:[String,Number],allowHtml:{type:Boolean,default:!0},defaultIndex:{type:[String,Number],default:0},swipeDuration:{type:[String,Number],default:"200"},readonly:Boolean},data:()=>({translate3dHeight:null,resData:[],children:[],resArr:[]}),computed:{itemPxHeight(){return this.itemHeight?Object(s.c)(this.itemHeight):44},columnsList(){return this.resArr=this.formatCascade(this.columns),this.resArr},backgroundSize(){return"100% "+((this.itemPxHeight*Number(this.visibleItemCount)-this.itemPxHeight)/2+"px")},dataType(){let t=this.columns[0]||{};return t.children?"cascade":t.values?"object":"text"}},methods:{formatCascade(t){for(var e=[],n={children:t};n&&n.children;){for(var i,s=n.children,r=null!=(i=n.defaultIndex)?i:+this.defaultIndex;s[r]&&s[r].disabled;){if(!(r<s.length-1)){r=0;break}r++}e.push({values:n.children,className:n.className,defaultIndex:r}),n=s[r]}return e},cancel(){this.$emit("cancel")},confirm(){let t=this;if("text"===this.dataType)this.$emit("confirm",this,this.getColumnValue(0),this.getColumnIndex(0));else{let e=this.getValues();"cascade"===this.dataType&&(e=e.map(function(e){return e[t.valueKey]})),this.$emit("confirm",this,e,this.getIndexes())}},change(t){let e=this;if("cascade"===this.dataType&&this.onCascadeChange(t),"text"===this.dataType)this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0));else{let n=this.getValues();"cascade"===this.dataType&&(n=n.map(function(t){return t[e.valueKey]})),this.$emit("change",this,n,t)}},touchEnd(t){let e=this;if("cascade"===this.dataType&&this.onCascadeChange(t),"text"===this.dataType)this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0));else{let n=this.getValues();"cascade"===this.dataType&&(n=n.map(function(t){return t[e.valueKey]})),this.$emit("change",this,n,t)}},onCascadeChange(t){for(var e={children:this.columns},n=this.getIndexes(),i=0;i<=t;i++)e=e.children[n[i]];for(;e&&e.children;)t++,this.setColumnValues(t,e.children),e=e.children[e.defaultIndex||0]},getIndexes(){return this.$children.map(function(t){return t.currentIndex})},setIndexes(){},setColumnValues(t,e){var n=this.$children[t];n&&n.setOptions(e)},getColumnValues(t){return(this.$children[t]||{}).options},getValues(){return this.$children.map(function(t){return t.getValue()})},setValues(t){var e=this;t.forEach(function(t,n){e.setColumnValue(n,t)})},getColumnValue(t){let e=this.getColumn(t);return(e&&e.getValue())[e.valueKey]},setColumnValue(t,e){let n=this.getColumn(t);n&&(n.setValue(e),"cascade"===this.dataType&&this.onCascadeChange(t))},getColumnIndex(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex(t,e){let n=this.getColumn(t);n&&(n.setIndex(e),"cascade"===this.dataType&&this.onCascadeChange(t))},getColumn(t){return this.$children[t]}}},d=Object(u.a)(h,i,[],!1,null,null,null);d.options.__file="packages/select/src/main.vue";var m=d.exports;m.install=function(t){t.component(m.name,m)};e.default=m}});